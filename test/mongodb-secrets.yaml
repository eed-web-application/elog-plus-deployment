apiVersion: ricoberger.de/v1alpha1
kind: VaultSecret
metadata:
  name: mongodb-secret
spec:
  path: secret/ad/accel-webapp-dev/elog/mongodb-secret
  type: Opaque
  keys:
    - MONGODB_APPLICATION_PASSWORD
    - MONGODB_APPPLICATION_USER
    - MONGODB_BACKUP_PASSWORD
    - MONGODB_BACKUP_USER
    - MONGODB_CLUSTER_ADMIN_PASSWORD
    - MONGODB_CLUSTER_ADMIN_USER
    - MONGODB_CLUSTER_MONITOR_PASSWORD
    - MONGODB_CLUSTER_MONITOR_USER
    - MONGODB_DATABASE_ADMIN_PASSWORD
    - MONGODB_DATABASE_ADMIN_USER
    - MONGODB_DATABASE_APP_USER
    - MONGODB_USER_ADMIN_PASSWORD
    - MONGODB_USER_ADMIN_USER
    - PMM_SERVER_API_KEY
  templates:
    ELOG_PLUS_MONGODB_URI: "mongodb://.Secrets.MONGODB_DATABASE_ADMIN_USER:.Secrets.MONGODB_DATABASE_ADMIN_PASSWORD@elog-plus-cluster:27017/admin?authSource=admin"
    ELOG_PLUS_ADMIN_MONGODB_URI: "mongodb://.Secrets.MONGODB_APPPLICATION_USER:.Secrets.MONGODB_APPLICATION_PASSWORD@elog-plus-cluster:27017/elogs?authSource=elogs"